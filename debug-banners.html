<!DOCTYPE html>
<html>
<head>
    <title>Banner Debug</title>
</head>
<body>
    <h1>Banner Debug Tool</h1>
    <button onclick="runDebug()">Run Debug</button>
    <div id="output"></div>

    <script>
        function runDebug() {
            const output = document.getElementById('output');
            output.innerHTML = '<h2>Debug Output:</h2><pre id="debug-pre"></pre>';
            const pre = document.getElementById('debug-pre');
            
            // Capture console.log output
            const originalLog = console.log;
            console.log = function(...args) {
                pre.textContent += args.join(' ') + '\n';
                originalLog.apply(console, args);
            };
            
            try {
                // Check all localStorage keys
                pre.textContent += '=== Banner Debug Script ===\n\n';
                pre.textContent += 'All localStorage keys:\n';
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    pre.textContent += `  ${key}\n`;
                }
                
                // Check banner-related keys
                const bannerKeys = [
                    'gang-boyz-homepage-banners',
                    'gang-boyz-footer-banner',
                    'gang-boyz-showcase-banners'
                ];
                
                bannerKeys.forEach(key => {
                    const data = localStorage.getItem(key);
                    if (data) {
                        pre.textContent += `\n${key}:\n`;
                        try {
                            const parsed = JSON.parse(data);
                            pre.textContent += `  Type: ${typeof parsed}\n`;
                            pre.textContent += `  Length: ${Array.isArray(parsed) ? parsed.length : 'N/A'}\n`;
                            
                            // If it's an array, check each banner
                            if (Array.isArray(parsed)) {
                                parsed.forEach((banner, index) => {
                                    pre.textContent += `    Banner ${index}:\n`;
                                    pre.textContent += `      ID: ${banner.id}\n`;
                                    pre.textContent += `      Name: ${banner.name}\n`;
                                    pre.textContent += `      Current Image: ${banner.currentImage ? banner.currentImage.substring(0, 100) + '...' : 'undefined'}\n`;
                                    pre.textContent += `      Image Length: ${banner.currentImage ? banner.currentImage.length : 'undefined'}\n`;
                                });
                            } else {
                                pre.textContent += `  Data: ${JSON.stringify(parsed, null, 2)}\n`;
                            }
                        } catch (e) {
                            pre.textContent += `  Error parsing JSON: ${e}\n`;
                            pre.textContent += `  Raw data: ${data.substring(0, 200)}...\n`;
                        }
                    } else {
                        pre.textContent += `\n${key}: No data found\n`;
                    }
                });
            } catch (error) {
                pre.textContent += `Error: ${error}\n`;
            } finally {
                console.log = originalLog;
            }
            
            pre.textContent += '\n=== End Debug Script ===\n';
        }
    </script>
</body>
</html>